{% extends 'base.html' %}

{% load staticfiles %}

{% block title %}{% endblock %}

{% block body_block %}
<h3>{{ problem.title }} by: {{ problem.user }}</h3>	
	{% if user.is_authenticated %}
		
		
		{% if problem %}
            
                
                <br> Place: {{problem.place}}
                <br> Descripton: {{problem.desc}}
                <br> Tags: {{problem.tags}}
                <br> Status: {{problem.status}}
                <br> Rquired people: {{problem.rq_ppl}}
                <br> Deadline: {{problem.deadline}} <br>
                
        {% else %}
            <strong>There are no problems present.</strong>
        {% endif %}
        
        
        {% if solutions %}
      	  <h3>Avaible Solutions:</h3>
	        {% for solution in solutions %}
	        	<br> Solution by: {{solution.user_id}}
	        	<br> Descripton: {{solution.desc}}
	        	<br> Served people: {{solution.served_ppl}} <br>
	        	{%if solution.status == 'pending'%}
	            	<br>Solution status: <a style="color:orange"><strong>{{solution.status}}</strong> </a>
	        	
	        	{%else%}
	        		<br>Solution status: <a style="color:green"><strong>{{solution.status}}</strong> </a>
	        	{%endif%}
	        	{% if problem.user == user and problem.status == 'pending' %}
	        		{%if solution.status == 'pending'%}
		                <form action="/problems/accept_solution/{{ solution.slug }}">
		    				<input type="submit" value="Accept this solution">
						</form>
				
					{% endif %}	
				
                <br>
                {% endif %}
	        {% endfor %}
        {% else %}
        <h3 style="color:red">
            <strong>No solutions yet.</strong>
        </h3>
        {% endif %}
        
        
        
        {% if problem.status == 'pending' %}
	        {% if problem.user != user %}
		        <h2>Add a solution!</h2>
		        <form id="solution_form" method="post" action="/problems/add_solution/{{ problem.slug }}/">
		        	{% csrf_token %} 
		            <br>  Description: {{sol_form.desc}}<br>
		            <br>  Served people: {{sol_form.served_ppl}}<br>
		        <br><input type="submit" name="submit" value="Add a solution!" /> <br>
		        </form>
		    {%endif%}
	        
	    {% else %}
	        <h3 style="color:green">
	            <strong>This problem is solved.</strong>
	        </h3>
        {% endif %}
        
	{% else %}
		<h2>Please login, or register</h2>
	{% endif %}
{% endblock %}
